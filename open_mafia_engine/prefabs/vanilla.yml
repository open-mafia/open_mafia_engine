version: 1.0
name: "Vanilla Mafia"
# phases are the default ones, "day" and "night", along with a "setup" phase
alignments: # TODO: Make less verbose
  - name: town
    outcome_checkers:
      - type: FactionEliminatedOutcome
        params:
          faction_names: "mafia"
      - type: FactionEliminatedOutcome
        params:
          faction_names: "town"
          outcome: defeat
  - name: mafia
    outcome_checkers:
      - type: FactionEliminatedOutcome
        params:
          faction_names: "town"
      - type: FactionEliminatedOutcome
        params:
          faction_names: "mafia"
          outcome: defeat
roles:
  - name: Citizen
    alignments: [town]
    abilities:
      - name: "Vote"
        type: SimpleLynchVoteAbility
        constraints:
          - type: ActorAliveConstraint
          - type: TargetAliveConstraint
          - type: DayConstraint
  - name: Mafioso
    alignments: mafia # also accepted, since single strings are special-cased
    abilities:
      - name: "Vote"
        type: SimpleLynchVoteAbility
        constraints:
          - type: ActorAliveConstraint
          - type: TargetAliveConstraint
          - type: DayConstraint
      - name: "Mafia Kill"
        type: KillAbility
        constraints:
          - type: ActorAliveConstraint
          - type: TargetAliveConstraint
          - type: NightConstraint
          - type: KeywordActionLimitPerPhaseConstraint
            params:
              keyword: "mafia_kill_limit"
aux:
  - type: SimpleLynchTally
  - type: DebugNotifier
  - type: DebugMortician
variants:
  - name: "5 players"
    players: 5
    role_counts:
      - name: Citizen
        guaranteed: 4
      - name: Mafioso
        guaranteed: 1
  - name: "6 players"
    players: 6
    role_counts:
      "Citizen": 5
      "Mafioso": 1
  - name: "7 players"
    players: 7
    role_counts:
      - name: Citizen
        guaranteed: 5
      - name: Mafioso
        guaranteed: 2
